<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8"/>
    <meta name="description" content="Data Visualisation Group Project Index Page"/>
    <meta name="keywords" content="HTML, CSS, JavaScript, D3"/>
    <meta name="author" content="Jacklin Kho Jia Fen, Ida Lee Pei Xin"/>
  
    <title>Sarawak Adventure</title>
    <link rel="stylesheet" type="text/css" href="style/style.css"/>
    <link href='https://fonts.googleapis.com/css?family=Baskervville' rel='stylesheet'>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://julian.com/research/velocity/build/jquery.velocity.min.js"></script>
    <script src="http://julian.com/research/velocity/build/velocity.ui.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/r72/three.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js'></script>
</head>

<body>
  <!-- Navigation Bar -->
  <!-- Navigation bar idea sourced from https://gist.github.com/CodeMyUI/c5eb164c63415ec0705a -->
  <div class="overlay-navigation">
    <nav role="navigation">
      <ul>
        <li><a href="index.html" data-content="The beginning">Home</a></li>
        <li><a href="sarawak_visitor.html" data-content="Whole World">Visitor Arrivals</a></li>
        <li><a href="transportation.html" data-content="Sea, Land, Air">Transportation</a></li>
        <li><a href="national_park.html" data-content="Foreign and Domestic Visitors">National Park</a></li>
      </ul>
    </nav>
  </div>

  <section class="home">
    <div class="open-overlay">
      <span class="bar-top"></span>
      <span class="bar-middle"></span>
      <span class="bar-bottom"></span>
    </div>
  </section>

  <!-- Parallax scrolling website sourced from https://thilakshids.medium.com/parallax-scrolling-website-step-by-step-guide-dc90f336548b -->
  <div class="whole">
    <section class="display">
        <h2 id="text">Sarawak<br>Adventure</h2>
        <img src="images/bird1.png" alt="bird1" id="bird1">
  
        <img src="images/bird2.png" alt="bird2" id="bird2">
        
        <img src="images/forest.png" alt="forest" id="forest">
        
        <img src="images/rocks.png" alt="rocks" id="rocks">
        
        <img src="images/water.png" alt="water" id="water">    
    </section>

    <!-- Dotted map idea sourced from https://gist.github.com/bluebeel/66532fb15c584b6df9f71e3453b8bac0 -->
    <div class="parallax-wrapper">
        <div class="sec">
            <h2 class="title_parallax">Sarawak Visitor Arrivals</h2>
            <canvas id="map"></canvas>
        </div>

        <!-- Parallax slider idea sourced from https://codepen.io/chen1223/pen/pqZWbg -->
        <section class="season-desc">
            <div class="desc-wrapper">
              <h3 class="season--title">Sarawak Visitor Arrivals</h3>
              <p class="season--about">Embark on a visual journey through the dynamic tourism landscape of Sarawak with our comprehensive data visualisation. Delving into visitor arrivals from 29 countries spanning the years 2018 to 2022, our interactive tool provides an in-depth exploration of tourism trends. Users can effortlessly discern the total number of visitors from each country for any given year and specific month. This intuitive visualisation not only offers a macroscopic view of overall trends but also allows users to zoom in, gaining granular insights into the ebb and flow of tourist arrivals throughout the years. Immerse yourself in the rich tapestry of Sarawak's tourism data, empowering yourself with a nuanced understanding of visitor dynamics, all at your fingertips.</p>
            </div>
        </section>
        
        <!-- Water three js ides sourced from https://codepen.io/knoland/pen/XKxrJb -->
        <div class="sec1">
            <h2 class="title_parallax">Transportation</h2>
            <div id="container_water"></div>
                <script id="vertex-shader" type="no-js">
                void main()	{
                    gl_Position = vec4( position, 1.0 );
                }
                </script>
                <script id="fragment-shader" type="no-js">
                uniform float iGlobalTime;
                uniform vec2 iResolution;

                const int NUM_STEPS = 8;
                const float PI	 	= 3.1415;
                const float EPSILON	= 1e-3;
                float EPSILON_NRM	= 0.1 / iResolution.x;

                // sea variables
                const int ITER_GEOMETRY = 3;
                const int ITER_FRAGMENT = 5;
                const float SEA_HEIGHT = 0.6;
                const float SEA_CHOPPY = 1.0;
                const float SEA_SPEED = 1.0;
                const float SEA_FREQ = 0.16;
                const vec3 SEA_BASE = vec3(0.1,0.19,0.22);
                const vec3 SEA_WATER_COLOR = vec3(0.8,0.9,0.6);
                float SEA_TIME = iGlobalTime * SEA_SPEED;
                mat2 octave_m = mat2(1.6,1.2,-1.2,1.6);

                mat3 fromEuler(vec3 ang) {
                    vec2 a1 = vec2(sin(ang.x),cos(ang.x));
                    vec2 a2 = vec2(sin(ang.y),cos(ang.y));
                    vec2 a3 = vec2(sin(ang.z),cos(ang.z));
                    mat3 m;
                    m[0] = vec3(
                        a1.y*a3.y+a1.x*a2.x*a3.x,
                        a1.y*a2.x*a3.x+a3.y*a1.x,
                        -a2.y*a3.x
                    );
                    m[1] = vec3(-a2.y*a1.x,a1.y*a2.y,a2.x);
                    m[2] = vec3(
                        a3.y*a1.x*a2.x+a1.y*a3.x,
                    a1.x*a3.x-a1.y*a3.y*a2.x,
                    a2.y*a3.y
                    );
                    return m;
                }

                float hash( vec2 p ) {
                    float h = dot(p,vec2(127.1,311.7));	
                    return fract(sin(h)*43758.5453123);
                }

                float noise( in vec2 p ) {
                    vec2 i = floor(p);
                    vec2 f = fract(p);	
                    vec2 u = f * f * (3.0 - 2.0 * f);
                    return -1.0 + 2.0 * mix(
                        mix(
                        hash(i + vec2(0.0,0.0)
                    ), 
                        hash(i + vec2(1.0,0.0)), u.x),
                        mix(hash(i + vec2(0.0,1.0) ), 
                        hash(i + vec2(1.0,1.0) ), u.x), 
                    u.y
                    );
                }

                float diffuse(vec3 n,vec3 l,float p) {
                    return pow(dot(n,l) * 0.4 + 0.6,p);
                }

                float specular(vec3 n,vec3 l,vec3 e,float s) {    
                    float nrm = (s + 8.0) / (3.1415 * 8.0);
                    return pow(max(dot(reflect(e,n),l),0.0),s) * nrm;
                }

                vec3 getSkyColor(vec3 e) {
                    e.y = max(e.y, 0.0);
                    vec3 ret;
                    ret.x = pow(1.0 - e.y, 2.0);
                    ret.y = 1.0 - e.y;
                    ret.z = 0.6+(1.0 - e.y) * 0.4;
                    return ret;
                }


                float sea_octave(vec2 uv, float choppy) {
                    uv += noise(uv);         
                    vec2 wv = 1.0 - abs(sin(uv));
                    vec2 swv = abs(cos(uv));    
                    wv = mix(wv, swv, wv);
                    return pow(1.0 - pow(wv.x * wv.y, 0.65), choppy);
                }

                float map(vec3 p) {
                    float freq = SEA_FREQ;
                    float amp = SEA_HEIGHT;
                    float choppy = SEA_CHOPPY;
                    vec2 uv = p.xz; 
                    uv.x *= 0.75;

                    float d, h = 0.0;    
                    for(int i = 0; i < ITER_GEOMETRY; i++) {        
                    d = sea_octave((uv + SEA_TIME) * freq, choppy);
                    d += sea_octave((uv - SEA_TIME) * freq, choppy);
                    h += d * amp;        
                    uv *= octave_m;
                    freq *= 1.9; 
                    amp *= 0.22;
                    choppy = mix(choppy, 1.0, 0.2);
                    }
                    return p.y - h;
                }

                float map_detailed(vec3 p) {
                    float freq = SEA_FREQ;
                    float amp = SEA_HEIGHT;
                    float choppy = SEA_CHOPPY;
                    vec2 uv = p.xz;
                    uv.x *= 0.75;

                    float d, h = 0.0;    
                    for(int i = 0; i < ITER_FRAGMENT; i++) {        
                        d = sea_octave((uv+SEA_TIME) * freq, choppy);
                        d += sea_octave((uv-SEA_TIME) * freq, choppy);
                        h += d * amp;        
                        uv *= octave_m;
                        freq *= 1.9; 
                        amp *= 0.22;
                        choppy = mix(choppy,1.0,0.2);
                    }
                    return p.y - h;
                }

                vec3 getSeaColor(
                    vec3 p,
                    vec3 n, 
                    vec3 l, 
                    vec3 eye, 
                    vec3 dist
                ) {  
                    float fresnel = 1.0 - max(dot(n,-eye),0.0);
                    fresnel = pow(fresnel,3.0) * 0.65;

                    vec3 reflected = getSkyColor(reflect(eye,n));    
                    vec3 refracted = SEA_BASE + diffuse(n,l,80.0) * SEA_WATER_COLOR * 0.12; 

                    vec3 color = mix(refracted,reflected,fresnel);

                    float atten = max(1.0 - dot(dist,dist) * 0.001, 0.0);
                    color += SEA_WATER_COLOR * (p.y - SEA_HEIGHT) * 0.18 * atten;

                    color += vec3(specular(n,l,eye,60.0));

                    return color;
                }

                // tracing
                vec3 getNormal(vec3 p, float eps) {
                    vec3 n;
                    n.y = map_detailed(p);    
                    n.x = map_detailed(vec3(p.x+eps,p.y,p.z)) - n.y;
                    n.z = map_detailed(vec3(p.x,p.y,p.z+eps)) - n.y;
                    n.y = eps;
                    return normalize(n);
                }

                float heightMapTracing(vec3 ori, vec3 dir, out vec3 p) {  
                    float tm = 0.0;
                    float tx = 1000.0;    
                    float hx = map(ori + dir * tx);

                    if(hx > 0.0) {
                    return tx;   
                    }

                    float hm = map(ori + dir * tm);    
                    float tmid = 0.0;
                    for(int i = 0; i < NUM_STEPS; i++) {
                    tmid = mix(tm,tx, hm/(hm-hx));                   
                    p = ori + dir * tmid;                   
                    float hmid = map(p);
                    if(hmid < 0.0) {
                        tx = tmid;
                        hx = hmid;
                    } else {
                        tm = tmid;
                        hm = hmid;
                    }
                    }
                    return tmid;
                }

                void main() {
                    vec2 uv = gl_FragCoord.xy / iResolution.xy;
                    uv = uv * 2.0 - 1.0;
                    uv.x *= iResolution.x / iResolution.y;    
                    float time = iGlobalTime * 0.3;

                    // ray
                    vec3 ang = vec3(
                    sin(time*3.0)*0.1,sin(time)*0.2+0.3,time
                    );    
                    vec3 ori = vec3(0.0,3.5,time*5.0);
                    vec3 dir = normalize(
                    vec3(uv.xy,-2.0)
                    );
                    dir.z += length(uv) * 0.15;
                    dir = normalize(dir);

                    // tracing
                    vec3 p;
                    heightMapTracing(ori,dir,p);
                    vec3 dist = p - ori;
                    vec3 n = getNormal(
                    p,
                    dot(dist,dist) * EPSILON_NRM
                    );
                    vec3 light = normalize(vec3(0.0,1.0,0.8)); 

                    // color
                    vec3 color = mix(
                    getSkyColor(dir),
                    getSeaColor(p,n,light,dir,dist),
                    pow(smoothstep(0.0,-0.05,dir.y),0.3)
                    );

                    // post
                    gl_FragColor = vec4(pow(color,vec3(0.75)), 1.0);
                }
                </script>
        </div>

        <!-- Parallax slider idea sourced from https://codepen.io/chen1223/pen/pqZWbg -->
        <section class="season-desc">
            <div class="desc-wrapper">
              <h3 class="season--title">Transportation</h3>
              <p class="season--about">Embark on a virtual journey through Sarawak's transportation landscape with our comprehensive visualisation tool. Designed to enhance your understanding of the region's connectivity, this platform offers valuable insights into the distances between Sarawak's 12 divisions and the corresponding travel times for sea, land, and air transport. Seamlessly compare and contrast the efficiency of different modes of transportation, enabling informed decision-making for your travel needs. Whether you're planning a road trip, considering a scenic flight, or opting for a maritime adventure, our visualisation provides a user-friendly interface for accessing accurate and real-time information. Navigate through Sarawak's diverse terrains with confidence, armed with the knowledge to optimize your travel experience.</p>
            </div>
        </section>
        
        <!-- Forest animation idea sourced from https://codepen.io/23456789/pen/YzqdwXO -->
        <section class="sec1">
            <div class="background-section"></div>
            <h2 class="title_parallax">National Park</h2>
        </section>

        <!-- Parallax slider idea sourced from https://codepen.io/chen1223/pen/pqZWbg -->
        <section class="season-desc">
            <div class="desc-wrapper">
              <h3 class="season--title">National Park</h3>
              <p class="season--about">Embark on an immersive exploration of Sarawak's 23 national parks with our powerful data visualisation tool. Covering the years 2018 to 2022, this platform meticulously compiles data on both foreign and domestic visitors, empowering users to seamlessly compare and analyze their respective footprints. The interface allows users to manipulate the displayed information, offering the flexibility to view total foreign visitors, domestic visitors, or a comprehensive overview. Dive deeper into the national parks' intricacies by clicking on individual park images, effortlessly redirecting to the official website for detailed information.</p>
            </div>
        </section>
    </div>

    <!-- Back To Top Button -->
    <!-- Back To Top Button idea sourced from https://codepen.io/Coding_Journey/pen/LMrLQV -->
    <button id="back-to-top-btn">
        <i class="fas fa-angle-double-up"></i>
    </button>

    <!-- partial -->
    <script src="script/index.js"></script>
    <script src="script/water.js"></script>

</div>
</body>
</html>
